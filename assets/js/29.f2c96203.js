(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{682:function(t,s,a){"use strict";a.r(s);var r=a(5),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("将本地普通的"),a("code",[t._v("SpringCloud")]),t._v("项目在IDEA下使用"),a("code",[t._v("Docker")]),t._v("部署")]),t._v(" "),a("h2",{attrs:{id:"环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[t._v("#")]),t._v(" 环境")]),t._v(" "),a("ul",[a("li",[t._v("Windows 10")]),t._v(" "),a("li",[t._v("IntelliJ IDEA 2018")]),t._v(" "),a("li",[t._v("Docker  18.09.2\n"),a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbdacb69f40bd5?w=727&h=611&f=png&s=90949",alt:""}})])]),t._v(" "),a("h2",{attrs:{id:"本地连接不需要tls加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地连接不需要tls加密"}},[t._v("#")]),t._v(" 本地连接不需要TLS加密")]),t._v(" "),a("p",[t._v("将docker与本地的连接设置为不需要TLS加密")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd1cd5308b144?w=1042&h=717&f=png&s=89802",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"idea-安装docker插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#idea-安装docker插件"}},[t._v("#")]),t._v(" IDEA 安装Docker插件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd1f59d00c9af?w=1299&h=872&f=png&s=118772",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"配置连接本地docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置连接本地docker"}},[t._v("#")]),t._v(" 配置连接本地Docker")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd20b3000d58a?w=1299&h=872&f=png&s=77294",alt:""}})]),t._v(" "),a("p",[t._v("显示"),a("code",[t._v("Connection Successful")]),t._v(" 成功连接到了本机上的"),a("code",[t._v("docker")]),t._v(" !")]),t._v(" "),a("h2",{attrs:{id:"打开一个本地springcloud项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打开一个本地springcloud项目"}},[t._v("#")]),t._v(" 打开一个本地SpringCloud项目")]),t._v(" "),a("p",[t._v("这是一个之前学习SpringCloud的多模块的项目，这里测试将子模块"),a("code",[t._v("eureka-server")]),t._v("部署在本地Docker上\n"),a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd4d40150e078?w=1887&h=694&f=png&s=166850",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd53dcf89819f?w=1882&h=702&f=png&s=142449",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"在项目根目录添加dockerfile文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在项目根目录添加dockerfile文件"}},[t._v("#")]),t._v(" 在项目根目录添加Dockerfile文件")]),t._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#持久化到指定目录")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VOLUME")]),t._v(" /tmp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将工程jar包（eureka-service-1.0-SNAPSHOT.jar）拷贝到 app.jar中")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" target/eureka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("1.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("SNAPSHOT.jar  app.jar\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" bash  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"touch /app.jar"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v("  8761\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 执行jar包  "-Djava.security.egd=file:/dev/./urandom"加快随机数产生过程')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENTRYPOINT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-Djava.security.egd=file:/dev/./urandom"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-jar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/app.jar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd5b1de93aaae?w=1868&h=463&f=png&s=87142",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"配置编辑docker-deployment-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置编辑docker-deployment-configuration"}},[t._v("#")]),t._v(" 配置编辑Docker Deployment Configuration")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd6357a5c7b8a?w=604&h=1010&f=png&s=85903",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口映射"}},[t._v("#")]),t._v(" 端口映射")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd64f66aa399f?w=636&h=166&f=png&s=12120",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载目录"}},[t._v("#")]),t._v(" 挂载目录")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd986093a1da2?w=626&h=250&f=png&s=14686",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd988f6f991af?w=604&h=1010&f=png&s=61431",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"构建docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建docker镜像"}},[t._v("#")]),t._v(" 构建Docker镜像")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd9cb393905f1?w=1865&h=814&f=png&s=137012",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"成功创建本地镜像-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#成功创建本地镜像-容器"}},[t._v("#")]),t._v(" 成功创建本地镜像,容器")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd9b17152f5ac?w=1822&h=672&f=png&s=82170",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"查看详细配置信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看详细配置信息"}},[t._v("#")]),t._v(" 查看详细配置信息")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbd9f85e93c1a7?w=1871&h=418&f=png&s=66869",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"访问通过容器启动的eureka服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问通过容器启动的eureka服务"}},[t._v("#")]),t._v(" 访问通过容器启动的Eureka服务")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbda07f2f4128a?w=1903&h=985&f=png&s=138437",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"查看正在运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看正在运行的容器"}},[t._v("#")]),t._v(" 查看正在运行的容器")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/19/16fbda26f7dbe611?w=1875&h=113&f=png&s=24230",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);