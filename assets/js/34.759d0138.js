(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{685:function(s,a,t){"use strict";t.r(a);var e=t(5),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"oracle简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oracle简介"}},[s._v("#")]),s._v(" Oracle简介")]),s._v(" "),t("blockquote",[t("p",[s._v("Oracle 12c，全称Oracle Database 12c，是Oracle 11g的升级版，新增了很多新的特性")])]),s._v(" "),t("h2",{attrs:{id:"docker下载oracle12c"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker下载oracle12c"}},[s._v("#")]),s._v(" Docker下载oracle12c")]),s._v(" "),t("h3",{attrs:{id:"查找oracle镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查找oracle镜像"}},[s._v("#")]),s._v(" "),t("strong",[s._v("查找oracle镜像")])]),s._v(" "),t("p",[t("code",[s._v("docker search oracle")]),s._v(" "),t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-e26fb9fd1e3e196b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s._v(" "),t("h3",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),t("p",[t("strong",[s._v("下载Oracle镜像")])]),s._v(" "),t("blockquote",[t("p",[s._v("我这里选择"),t("code",[s._v("truevoly/oracle-12c")]),s._v("镜像")])]),s._v(" "),t("p",[t("code",[s._v("docker pull truevoly/oracle-12c")])]),s._v(" "),t("h3",{attrs:{id:"查看已安装镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看已安装镜像"}},[s._v("#")]),s._v(" "),t("strong",[s._v("查看已安装镜像")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-4a73af68fe9e1192.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"启动oracle数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动oracle数据库"}},[s._v("#")]),s._v(" "),t("strong",[s._v("启动Oracle数据库")])]),s._v(" "),t("p",[s._v("启动并暴露"),t("code",[s._v("8080&1521")]),s._v("端口，"),t("code",[s._v("8080")]),s._v("可以登录网页端管理，"),t("code",[s._v("1521")]),s._v("是数据连接端口:\n"),t("code",[s._v("docker run -d -p 8080:8080 -p 1521:1521 truevoly/oracle-12c")]),s._v(" "),t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-84e55ca05a9c1fb3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}}),s._v("\n启动并暴露8080&1521端口，并且挂载宿主机目录 "),t("em",[t("code",[s._v("/var/oracle/data")])]),s._v(" 到oracle服务器*"),t("code",[s._v("/u01/app/oracle")]),s._v("*目录，这样database数据就保存在本地宿主机上：\n"),t("code",[s._v("docker run -d -p 8080:8080 -p 1521:1521 -v /var/oracle/data:u01/app/oracle truevoly/oracle-12c")])]),s._v(" "),t("p",[s._v("启动并定制化DBCA总内存大小，DBCA_TOTAL_MEMORY (in Mb):")]),s._v(" "),t("h3",{attrs:{id:"查看日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[s._v("#")]),s._v(" "),t("strong",[s._v("查看日志")])]),s._v(" "),t("p",[t("code",[s._v("docker logs -f 84d8")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-d710710456d9e487.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"进入oracle容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入oracle容器"}},[s._v("#")]),s._v(" 进入oracle容器")]),s._v(" "),t("p",[s._v("进入镜像的bash对数据库进行进一步的操作")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it 84d8 /bin/bash\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"连接oracle数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#连接oracle数据库"}},[s._v("#")]),s._v(" "),t("strong",[s._v("连接Oracle数据库")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostname")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" localhost "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#主机名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1521")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("sid")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xe \n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("service name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xe "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" oracle "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("使用navicat连接数据库\n"),t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-a0a794f98db2f6d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"创建用户一般分四步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户一般分四步"}},[s._v("#")]),s._v(" 创建用户一般分四步：")]),s._v(" "),t("ul",[t("li",[s._v("第一步：创建临时表空间（可选）")]),s._v(" "),t("li",[s._v("第二步：创建数据表空间")]),s._v(" "),t("li",[s._v("第三步：创建用户并制定表空间")]),s._v(" "),t("li",[s._v("第四步：给用户授予权限")])]),s._v(" "),t("h3",{attrs:{id:"创建表空间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建表空间"}},[s._v("#")]),s._v(" 创建表空间")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建表空间  `BKJ`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLESPACE")]),s._v(" BKJ \n\tTEMPFILE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/u01/app/oracle/oradata/tablespace/BKJ.DBF'")]),s._v(" \n\tSIZE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("M \n\tAUTOEXTEND "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("NEXT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(" M MASIZE UNLIMITED \n\tEXTENT MANAGEMENT "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"新建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建用户"}},[s._v("#")]),s._v(" 新建用户")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 新建用户`TEST`并选择刚创建的表空间 `BKJ`")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" TEST  \n\tIDENTIFIED "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("          \n\t\tACCOUNT "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UNLOCK")]),s._v("          \n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLESPACE")]),s._v(" BKJ"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"赋予用户权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#赋予用户权限"}},[s._v("#")]),s._v(" 赋予用户权限")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- connect,resource,dba权限赋予 test用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONNECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("RESOURCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("DBA "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" TEST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 多权限授权")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ANY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ANY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("EXP_FULL_DATABASE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("IMP_FULL_DATABASE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nDBA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONNECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("RESOURCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SESSION")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" TEST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("新建用户成功啦>_<")]),s._v(" "),t("h2",{attrs:{id:"oracle导入dmp文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#oracle导入dmp文件"}},[s._v("#")]),s._v(" Oracle导入dmp文件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# imp 命令导入")]),s._v("\n\nimp test/123456@localhost:1521/XE \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/u01/app/oracle/test2020.dpm\n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/u01/app/oracle/imp.log \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fromuser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("touser")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("constraints")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("N "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ignore")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("y\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# impdp命令导入")]),s._v("\nimpdp test/123456@localhost/XE \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DIRECTORY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DATA_PUMP_DIR \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DUMPFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test2020.dpm \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REMAP_SCHEMA")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin:test \n  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REMAP_TABLESPACE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ADMIN_BKJ:BKJ\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 说明：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  remap_schema当你从A用户导出的数据，想要导入到B用户中去，就使用这个：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    remap_schema=A:B")]),s._v("\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  remap_tablespace 与上面类似，数据库对象本来存在于tbs_a表空间，现在你不想放那儿了，想换到tbs_b，就用这个")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    remap_tablespace=tbs_a:tbs_b 结果是所有tbs_a中的对象都会建在tbs_b表空间中。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#提示：这样做的前提是目标用户B和目标表空间都存在")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("p",[t("strong",[s._v("参考文章")]),s._v(" "),t("a",{attrs:{href:"http://www.imooc.com/article/268649?block_id=tuijian_wz",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker快速搭建Oracle12c"),t("OutboundLink")],1),s._v(" "),t("a",{attrs:{href:"https://github.com/MaksymBilenko/docker-oracle-12c",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/MaksymBilenko/docker-oracle-12c"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);