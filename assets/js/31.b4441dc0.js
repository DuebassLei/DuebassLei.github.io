(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{681:function(s,a,t){"use strict";t.r(a);var e=t(5),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"dockerfile关于"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile关于"}},[s._v("#")]),s._v(" Dockerfile关于")]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("Docker")]),s._v("中创建镜像最常用的方式，就是使用"),t("code",[s._v("Dockerfile")]),s._v("。"),t("code",[s._v("Dockerfile")]),s._v("是一个"),t("code",[s._v("Docker")]),s._v("镜像的描述文件，"),t("code",[s._v("Dockerfile")]),s._v("包含了一条条的指令，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。")]),s._v(" "),t("h2",{attrs:{id:"dockerfile思维导图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile思维导图"}},[s._v("#")]),s._v(" "),t("code",[s._v("Dockerfile")]),s._v("思维导图")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/15668934-8fc9d137e3a31f9d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"dockerfile示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile示例"}},[s._v("#")]),s._v(" "),t("code",[s._v("Dockerfile")]),s._v("示例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# FROM指定所需依赖的基础镜像 ,格式：FROM <image>:<tag>")]),s._v("\nFROM java:8\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 持久化到指定目录")]),s._v("\nVOLUME /tmp\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ADD复制文件，格式：ADD <src> <dest>")]),s._v("\nADD eureka-server-1.0-SNAPSHOT.jar  app.jar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RUN在容器构建过程中执行的命令,格式：RUN <command>")]),s._v("\nRUN "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("  -c "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"touch /app.jar"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# EXPOSE声明需要对外暴露的端口")]),s._v("\nEXPOSE  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8761")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ENTRYPOINT  指定docker容器启动时执行的命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('##"-Djava.security.egd=file:/dev/./urandom" 加快随机数产生过程')]),s._v("\nENTRYPOINT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"java"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Djava.security.egd=file:/dev/./urandom"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-jar"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/app.jar"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"dockerfile常用指令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile常用指令"}},[s._v("#")]),s._v(" "),t("code",[s._v("Dockerfile")]),s._v("常用指令")]),s._v(" "),t("h2",{attrs:{id:"_2-1-from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-from"}},[s._v("#")]),s._v(" 2.1 FROM")]),s._v(" "),t("p",[s._v("指明构建的新镜像是来自于哪个基础镜像，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("FROM centos:6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-2-maintainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-maintainer"}},[s._v("#")]),s._v(" 2.2 MAINTAINER")]),s._v(" "),t("p",[s._v("指明镜像维护者及其联系方式（一般是邮箱地址），例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("MAINTAINER DuebassLei "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1130122701")]),s._v("@qq.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("不过，"),t("code",[s._v("MAINTAINER")]),s._v("并不推荐使用，更推荐使用LABEL来指定镜像作者，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("LABEL "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("maintainer")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"DuebassLei"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-3-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-run"}},[s._v("#")]),s._v(" 2.3 RUN")]),s._v(" "),t("p",[s._v("构建镜像时运行的"),t("code",[s._v("Shell")]),s._v("命令，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("RUN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yum"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"install"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"httpd"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nRUN yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" httpd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_2-4-cmd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-cmd"}},[s._v("#")]),s._v(" 2.4 CMD")]),s._v(" "),t("p",[s._v("启动容器时执行的"),t("code",[s._v("Shell")]),s._v("命令，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("CMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-C"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/start.sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \nCMD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/sbin/sshd"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-D"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \nCMD /usr/sbin/sshd -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_2-5-expose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-expose"}},[s._v("#")]),s._v(" 2.5 EXPOSE")]),s._v(" "),t("p",[s._v("声明容器运行的服务端口，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("EXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-6-env"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-env"}},[s._v("#")]),s._v(" 2.6 ENV")]),s._v(" "),t("p",[s._v("设置环境内环境变量，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ENV MYSQL_ROOT_PASSWORD "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\nENV JAVA_HOME /usr/local/jdk1.8.0_45\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_2-7-add"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-add"}},[s._v("#")]),s._v(" 2.7 ADD")]),s._v(" "),t("p",[s._v("拷贝文件或目录到镜像中，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ADD "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dest"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nADD html.tar.gz /var/www/html\nADD https://xxx.com/html.tar.gz /var/www/html\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("***PS：***如果是URL或压缩包，会自动下载或自动解压。")]),s._v(" "),t("h2",{attrs:{id:"_2-8-copy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-copy"}},[s._v("#")]),s._v(" 2.8 COPY")]),s._v(" "),t("p",[s._v("拷贝文件或目录到镜像中，用法同ADD，只是不支持自动下载和解压，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("COPY ./start.sh /start.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-9-entrypoint"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-entrypoint"}},[s._v("#")]),s._v(" 2.9 ENTRYPOINT")]),s._v(" "),t("p",[s._v("启动容器时执行的"),t("code",[s._v("Shell")]),s._v("命令，同"),t("code",[s._v("CMD")]),s._v("类似，只是由"),t("code",[s._v("ENTRYPOINT")]),s._v("启动的程序"),t("strong",[s._v("不会被docker run命令行指定的参数所覆盖")]),s._v("，而且，"),t("strong",[s._v("这些命令行参数会被当作参数传递给ENTRYPOINT指定指定的程序")]),s._v("，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ENTRYPOINT "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-C"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/start.sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nENTRYPOINT /bin/bash -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/start.sh'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("***PS：***"),t("code",[s._v("Dockerfile")]),s._v("文件中也可以存在多个"),t("code",[s._v("ENTRYPOINT")]),s._v("指令，但仅有最后一个会生效。")]),s._v(" "),t("h2",{attrs:{id:"_2-10-volume"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-volume"}},[s._v("#")]),s._v(" 2.10 VOLUME")]),s._v(" "),t("p",[s._v("指定容器挂载点到宿主机自动生成的目录或其他容器，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("VOLUME "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/mysql"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("***PS：***一般不会在Dockerfile中用到，更常见的还是在docker run的时候指定-v数据卷。")]),s._v(" "),t("h2",{attrs:{id:"_2-11-user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-11-user"}},[s._v("#")]),s._v(" 2.11 USER")]),s._v(" "),t("p",[s._v("为RUN、CMD和ENTRYPOINT执行Shell命令指定运行用户，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("usergroup"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("UID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" edisonzhou\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"_2-12-workdir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-12-workdir"}},[s._v("#")]),s._v(" 2.12 WORKDIR")]),s._v(" "),t("p",[s._v("为RUN、CMD、ENTRYPOINT以及COPY和AND设置工作目录，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("WORKDIR /data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-13-healthcheck"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-13-healthcheck"}},[s._v("#")]),s._v(" 2.13 HEALTHCHECK")]),s._v(" "),t("p",[s._v("告诉Docker如何测试容器以检查它是否仍在工作，即健康检查，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("HEALTHCHECK --interval"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5m --timeout"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("3s --retries"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    CMD "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -f http:/localhost/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("blockquote",[t("p",[s._v("一些选项的说明：")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("--interval=DURATION (default: 30s)")]),s._v("：每隔多长时间探测一次，默认30秒")]),s._v(" "),t("li",[t("code",[s._v("-- timeout= DURATION (default: 30s)")]),s._v("：服务响应超时时长，默认30秒")]),s._v(" "),t("li",[t("code",[s._v("--start-period= DURATION (default: 0s)")]),s._v("：服务启动多久后开始探测，默认0秒")]),s._v(" "),t("li",[t("code",[s._v("--retries=N (default: 3)")]),s._v("：认为检测失败几次为宕机，默认3次")])]),s._v(" "),t("blockquote",[t("p",[s._v("一些返回值的说明：")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("0")]),s._v("：容器成功是健康的，随时可以使用")]),s._v(" "),t("li",[t("code",[s._v("1")]),s._v("：不健康的容器无法正常工作")]),s._v(" "),t("li",[t("code",[s._v("2")]),s._v("：保留不使用此退出代码")])]),s._v(" "),t("h2",{attrs:{id:"_2-14-arg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-14-arg"}},[s._v("#")]),s._v(" 2.14 ARG")]),s._v(" "),t("p",[s._v("在构建镜像时，指定一些参数，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("FROM centos:6\nARG user "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ARG user=root")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("这时，我们在docker build时可以带上自定义参数user了，如下所示：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("docker build --build-arg "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DuebassLei Dockerfile "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" "),t("em",[s._v("参考")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/edisonchou/p/dockerfile_inside_introduction.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("你必须知道的Dockerfile"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/builder/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Dockerfile reference"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);