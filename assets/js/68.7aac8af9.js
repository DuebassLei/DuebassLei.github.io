(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{720:function(a,s,t){"use strict";t.r(s);var n=t(5),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"capacitor-vue-vant移动端打包总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#capacitor-vue-vant移动端打包总结"}},[a._v("#")]),a._v(" Capacitor+Vue+Vant移动端打包总结")]),a._v(" "),t("blockquote",[t("p",[a._v("本笔记为打包"),t("code",[a._v("Vue")]),a._v("移动端"),t("code",[a._v("Android Apk")])])]),a._v(" "),t("h3",{attrs:{id:"打包步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包步骤"}},[a._v("#")]),a._v(" 打包步骤")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("Capacitor")]),a._v("与"),t("code",[a._v("Vue")]),a._v("项目结合基本配置自行百度/谷歌，这里是已集成配置好的项目。")])]),a._v(" "),t("p",[t("em",[t("strong",[a._v("步骤：")])])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("npm run build")]),a._v("打包"),t("code",[a._v("vue")]),a._v("项目生成"),t("code",[a._v("dist")]),a._v("目录\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200423185407718.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:"dist"}})]),a._v(" "),t("li",[t("code",[a._v("npx cap sync")]),a._v("同步依赖和拷贝文件"),t("code",[a._v("dist")]),a._v("下文件到"),t("code",[a._v("Android")]),a._v("的"),t("code",[a._v("assets")]),a._v("目录下\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200423185644152.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:"Android"}}),a._v(" "),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200423185917135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:""}})]),a._v(" "),t("li",[t("code",[a._v("npx cap open android")]),a._v("自动调用打开Android Studio工具构建项目，编译调试即可。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200423190504561.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:"在这里插入图片描述"}})])]),a._v(" "),t("h3",{attrs:{id:"capacitor基本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#capacitor基本命令"}},[a._v("#")]),a._v(" Capacitor基本命令")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装 Capacitor")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --save @capacitor/core @capacitor/cli\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#初始化 Capacitor，会要求输入 App Name、App ID")]),a._v("\nnpx cap init\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#添加 iOS 或 Android 平台")]),a._v("\nnpx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" ios \nnpx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" android \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#自动打开 Xcode 或 Android Studio 打包工程。")]),a._v("\nnpx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v(" ios \nnpx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v(" android \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#拷贝`www`目录到iOS或Android工程")]),a._v("\n npx cap copy ios\n npx cap copy android \n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#安装插件或依赖后更新iOS或Androd工程的依赖")]),a._v("\n npx cap update ios npx cap update android \n \n "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#同步工程包括更新依赖以及拷贝`www`目录，相当于`copy`+`update`")]),a._v("\n npx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v("\n \n "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#打开浏览器测试PWA")]),a._v("\n npx cap serve \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br")])]),t("h3",{attrs:{id:"问题一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题一"}},[a._v("#")]),a._v(" 问题一")]),a._v(" "),t("p",[a._v("在使用Capacitor打包Android项目上运行该应用程序时遇到问题。\nAndroid Studio拒绝运行项目并显示以下错误：")]),a._v(" "),t("blockquote",[t("p",[a._v("错误：无法找到脚本“："),t("code",[a._v("xxx\\android\\capacitor-cordova-android-plugins\\cordova.variables.gradle")]),a._v("”它不存在。")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200422174631170.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:"errors"}})]),a._v(" "),t("h4",{attrs:{id:"解决办法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[a._v("#")]),a._v(" 解决办法")]),a._v(" "),t("p",[a._v("如果您无法在android项目文件夹中找到"),t("code",[a._v("capacitor-cordova-android-plugins")]),a._v("文件夹，则需要运行"),t("code",[a._v("capacitor")]),a._v("命令来创建它（并更新插件变量）：")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("npx cap "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sync")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("通过手动再次同步"),t("code",[a._v("Gradle")]),a._v("文件可以解决此问题")]),a._v(" "),t("h3",{attrs:{id:"问题二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题二"}},[a._v("#")]),a._v(" 问题二")]),a._v(" "),t("blockquote",[t("p",[t("code",[a._v("This version of Android Studio cannot open this project, please retry with Android Studio 3.5 or newer")])])]),a._v(" "),t("p",[a._v("出现这个问题是因为使用的Gradle版本太高，只需要将gradle降级就可以，或者使用本地还能编译的配置版本替换即可。")]),a._v(" "),t("p",[t("code",[a._v("classpath 'com.android.tools.build:gradle:3.3.1'")])]),a._v(" "),t("p",[t("a",{attrs:{href:"https://stackoverflow.com/questions/54784948/this-version-of-android-studio-cannot-open-this-project-please-retry-with-andro",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考Stackoverflow问题"),t("OutboundLink")],1)]),a._v(" "),t("h4",{attrs:{id:"解决办法一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决办法一"}},[a._v("#")]),a._v(" 解决办法一")]),a._v(" "),t("blockquote",[t("p",[a._v("降低"),t("code",[a._v("gradle")]),a._v("版本")])]),a._v(" "),t("ul",[t("li",[a._v("修改"),t("code",[a._v("build.gradle")]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("classpath "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'com.android.tools.build:gradle:3.3.1'")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])]),a._v(" "),t("li",[a._v("修改"),t("code",[a._v("gradle-wrapper.properties")]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("distributionUrl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("://services.gradle.org/distributions/gradle-4.10.1-all.zip\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])]),a._v(" "),t("h4",{attrs:{id:"解决方法二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方法二"}},[a._v("#")]),a._v(" 解决方法二：")]),a._v(" "),t("blockquote",[t("p",[a._v("升级"),t("code",[a._v("Android studio")]),a._v("版本新版本")])])])}),[],!1,null,null,null);s.default=e.exports}}]);