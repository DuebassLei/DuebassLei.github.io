(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{692:function(s,a,t){"use strict";t.r(a);var n=t(5),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"yum镜像源更换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum镜像源更换"}},[s._v("#")]),s._v(" yum镜像源更换")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入镜像源目录")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/yum.repos.d\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份旧的配置文件 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" CentOS-Base.repo CentOS-Base.repo.bak \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下载阿里源的文件 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清理缓存")]),s._v("\n\nyum clean all \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重新生成新的缓存")]),s._v("\n\nyum makecache \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"安装基础库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装基础库"}},[s._v("#")]),s._v(" 安装基础库")]),s._v(" "),t("h3",{attrs:{id:"安装gcc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装gcc"}},[s._v("#")]),s._v(" 安装gcc")]),s._v(" "),t("blockquote",[t("p",[s._v("gcc是linux下的编译器在此不多做解释，感兴趣的小伙伴可以去查一下相关资料，它可以编译 C,C++,Ada,Object C和Java等语言")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看gcc版本 ")]),s._v("\ngcc -v\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装")]),s._v("\nyum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"pcre、pcre-devel安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pcre、pcre-devel安装"}},[s._v("#")]),s._v(" pcre、pcre-devel安装")]),s._v(" "),t("blockquote",[t("p",[s._v("pcre是一个perl库，包括perl兼容的正则表达式库，nginx的http模块使用pcre来解析正则表达式，所以需要安装pcre库。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y pcre pcre-devel\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"zlib安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zlib安装"}},[s._v("#")]),s._v(" zlib安装")]),s._v(" "),t("blockquote",[t("p",[s._v("zlib库提供了很多种压缩和解压缩方式nginx使用zlib对http包的内容进行gzip，所以需要安装")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y zlib zlib-devel\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"openssl安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#openssl安装"}},[s._v("#")]),s._v(" openssl安装")]),s._v(" "),t("blockquote",[t("p",[s._v("openssl是web安全通信的基石")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#安装")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y openssl openssl-devel\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx"}},[s._v("#")]),s._v(" 安装nginx")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1 下载nginx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://nginx.org/download/nginx-1.18.0.tar.gz \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf  nginx-1.18.0.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 进入nginx解压的文件目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.18.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4 依次运行下面命令")]),s._v("\n./configure\n \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5 默认安装目录usr/local/nginx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" usr/local/nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置所在文件")]),s._v("\nusr/local/nginx/conf\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#切换到/usr/local/nginx/sbin，启动nginx")]),s._v("\n./nginx\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看nginx进程,是否启动成功")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h2",{attrs:{id:"firewall防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#firewall防火墙"}},[s._v("#")]),s._v(" "),t("code",[s._v("firewall")]),s._v("防火墙")]),s._v(" "),t("h3",{attrs:{id:"安装及查看服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装及查看服务"}},[s._v("#")]),s._v(" 安装及查看服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" firewalld\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启服务")]),s._v("\nsystemctl start firewalld.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭服务")]),s._v("\nsystemctl stop firewalld.service\n\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开机自动启动")]),s._v("\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" firewalld.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭开机启动")]),s._v("\nsystemctl disable firewalld.service \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看状态")]),s._v("\nfirewall-cmd --state "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#running 表示运行")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"启用某个服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启用某个服务"}},[s._v("#")]),s._v(" 启用某个服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时")]),s._v("\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久")]),s._v("\nfirewall-cmd --permanent --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"开启某个端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启某个端口"}},[s._v("#")]),s._v(" 开启某个端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久")]),s._v("\nfirewall-cmd --permanent --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("-8081/tcp \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时")]),s._v("\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("-8081/tcp \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"伪装ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#伪装ip"}},[s._v("#")]),s._v(" 伪装"),t("code",[s._v("IP")])]),s._v(" "),t("blockquote",[t("p",[s._v("防火墙可以实现伪装IP的功能，下面的端口转发就会用到这个功能。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("firewall-cmd --query-masquerade "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查是否允许伪装IP")]),s._v("\nfirewall-cmd --add-masquerade "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 允许防火墙伪装IP")]),s._v("\nfirewall-cmd --remove-masquerade"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止防火墙伪装IP")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"端口转发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口转发"}},[s._v("#")]),s._v(" 端口转发")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至8080")]),s._v("\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" --permanent\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至")]),s._v("\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1 --permanent\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将80端口的流量转发至192.168.0.1的8080端口")]),s._v("\nfirewall-cmd --add-forward-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":proto"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tcp:toaddr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.1:toport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" --permanent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"使用命令加载设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用命令加载设置"}},[s._v("#")]),s._v(" 使用命令加载设置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("firewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"查看开启的端口和服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看开启的端口和服务"}},[s._v("#")]),s._v(" 查看开启的端口和服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务空格隔开 例如 dhcpv6-client https ss")]),s._v("\nfirewall-cmd --permanent --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --list-services\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口空格隔开 例如 8080-8081/tcp 8388/tcp 80/tcp")]),s._v("\nfirewall-cmd --permanent --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --list-ports \n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"修改ssh端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改ssh端口"}},[s._v("#")]),s._v(" 修改ssh端口")]),s._v(" "),t("h3",{attrs:{id:"一、修改ssh配置文件sshd-config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、修改ssh配置文件sshd-config"}},[s._v("#")]),s._v(" 一、修改"),t("code",[s._v("ssh")]),s._v("配置文件"),t("code",[s._v("sshd_config")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201214133118599.png",alt:"编辑配置文件"}}),s._v(" "),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201214133400769.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTAzODgy,size_16,color_FFFFFF,t_70",alt:"开启10022端口"}})]),s._v(" "),t("h3",{attrs:{id:"二、防火墙设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、防火墙设置"}},[s._v("#")]),s._v(" 二、防火墙设置")]),s._v(" "),t("h4",{attrs:{id:"开启10022-端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启10022-端口"}},[s._v("#")]),s._v(" 开启"),t("code",[s._v("10022")]),s._v(" 端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开放10022端口")]),s._v("\nfirewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10022")]),s._v("/tcp --permanent\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重载配置")]),s._v("\nfirewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2020121413372241.png",alt:"开启端口"}}),s._v("\n三、向"),t("code",[s._v("SELinux")]),s._v("中添加修改的"),t("code",[s._v("SSH")]),s._v("端口")]),s._v(" "),t("h4",{attrs:{id:"先安装selinux的管理工具-semanage-如果已经安装了就直接到下一步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先安装selinux的管理工具-semanage-如果已经安装了就直接到下一步"}},[s._v("#")]),s._v(" 先安装"),t("code",[s._v("SELinux")]),s._v("的管理工具 "),t("code",[s._v("semanage")]),s._v(" (如果已经安装了就直接到下一步)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum provides semanage\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"安装运行semanage所需依赖工具包policycoreutils-python"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装运行semanage所需依赖工具包policycoreutils-python"}},[s._v("#")]),s._v(" 安装运行"),t("code",[s._v("semanage")]),s._v("所需依赖工具包"),t("code",[s._v("policycoreutils-python")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" policycoreutils-python\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"查询当前-ssh-服务端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询当前-ssh-服务端口"}},[s._v("#")]),s._v(" 查询当前 "),t("code",[s._v("ssh")]),s._v(" 服务端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("semanage port -l "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"向-selinux-中添加-ssh-端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#向-selinux-中添加-ssh-端口"}},[s._v("#")]),s._v(" 向 "),t("code",[s._v("SELinux")]),s._v(" 中添加 "),t("code",[s._v("ssh")]),s._v(" 端口")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("semanage port -a -t ssh_port_t -p tcp "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10022")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201214134314126.png",alt:"查看并添加10022端口"}})]),s._v(" "),t("h4",{attrs:{id:"重启-ssh-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启-ssh-服务"}},[s._v("#")]),s._v(" 重启 "),t("code",[s._v("ssh")]),s._v(" 服务")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("systemctl restart sshd.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("测试成功后，把"),t("code",[s._v("22")]),s._v("端口注释掉即可")]),s._v(" "),t("h3",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/heqiuyong/p/11072829.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("CentOS7修改SSH端口"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"修改root密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改root密码"}},[s._v("#")]),s._v(" 修改"),t("code",[s._v("root")]),s._v("密码")]),s._v(" "),t("blockquote",[t("p",[s._v("已"),t("code",[s._v("root")]),s._v("用户登录后")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#输入该命令修改密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("不需要重启，下此的登陆使用修改后密码进行登录。")]),s._v(" "),t("h2",{attrs:{id:"netstat-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#netstat-命令"}},[s._v("#")]),s._v(" "),t("code",[s._v("Netstat")]),s._v(" 命令")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Netstat")]),s._v("命令用于显示各种网络相关信息，如网络连接，路由表，接口状态 "),t("code",[s._v("(Interface Statistics)，masquerade")]),s._v(" 连接，多播成员"),t("code",[s._v("(Multicast Memberships)")]),s._v(" 等等。")])]),s._v(" "),t("h3",{attrs:{id:"常见参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见参数"}},[s._v("#")]),s._v(" 常见参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("-a "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("all"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示所有选项，netstat默认不显示LISTEN相关")]),s._v("\n-t "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tcp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#仅显示tcp相关选项")]),s._v("\n-u "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("udp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#仅显示udp相关选项")]),s._v("\n-n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#拒绝显示别名，能显示数字的全部转化成数字。(重要)")]),s._v("\n-l "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#仅列出有在 Listen (监听) 的服務状态")]),s._v("\n\n-p "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示建立相关链接的程序名(macOS中表示协议 -p protocol)")]),s._v("\n-r "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示路由信息，路由表")]),s._v("\n-e "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示扩展信息，例如uid等")]),s._v("\n-s "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#按各个协议进行统计 (重要)")]),s._v("\n-c "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每隔一个固定时间，执行该netstat命令。")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),t("h4",{attrs:{id:"列出所有端口-包括监听和未监听的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出所有端口-包括监听和未监听的"}},[s._v("#")]),s._v(" 列出所有端口 (包括监听和未监听的)")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出所有端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -at "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出所有tcp端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -au "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出所有udp端口 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -antlp\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"列出所有处于监听状态的-sockets"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出所有处于监听状态的-sockets"}},[s._v("#")]),s._v(" 列出所有处于监听状态的 "),t("code",[s._v("Sockets")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -l "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只显示监听端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lt "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只列出所有监听tcp端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lu "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只列出所有监听udp端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只列出所有监听UNIX端口")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);